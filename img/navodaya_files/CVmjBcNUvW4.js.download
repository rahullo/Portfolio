if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("MEventLoadingOverlay",["cx","CSS","MContextualThing","MParent","Stratcom","isFalsey"],(function(a,b,c,d,e,f,g,h){var i=function(){function a(a,b,d){var e=this;this.$4=!1;this.$5=function(a){a=a.getTarget();if(!a||e.$7(a))return;e.$4?e.$8():e.$9()};this.$6=function(){for(var a=0;a<e.$1.length;a++)e.$1[a].remove();e.$1=[]};this.$1=[c("Stratcom").listen("click",b,this.$5.bind(this)),c("Stratcom").listen("m:page:unload",null,this.$6.bind(this))];this.$2=a;this.$3=d}var b=a.prototype;b.$7=function(a){var b=this.$3;if(c("isFalsey")(b))return!0;a=a;var e=d("MContextualThing").getContext(a);e&&(a=e);return d("MParent").bySigil(this.$2,b)===d("MParent").bySigil(a,b)};b.$9=function(){c("CSS").addClass(this.$2,"_58z9"),this.$4=!0};b.$8=function(){c("CSS").removeClass(this.$2,"_58z9"),this.$4=!1};return a}();function a(a){new i(a.loader,a.sigil,a.scopeSigil)}g.setup=a}),98);
__d("MEventsDashboardURISetter",["QueryString","Stratcom","URI"],(function(a,b,c,d,e,f){var g,h={removeActionContext:function(){var a=h.removeActionContextFromURL(window.location.href);window.history.replaceState({},window.title,a)},removeActionContextFromURL:function(a){a=new(g||(g=b("URI")))(a);var c=a.getQueryData();c.ac&&delete c.ac;c.acontext&&delete c.acontext;c.actionContext&&delete c.actionContext;a.setQueryData(c);return a.toString()},replaceURI:function(a){var c=new(g||(g=b("URI")))(a);c.getPath()!==window.location.pathname&&b("Stratcom").listen("m:ajax:saving:complete",null,function(){var c=new(g||(g=b("URI")))(h.removeActionContextFromURL(a)),d=c.getPath(),e=c.getQueryData();e&&(d=b("QueryString").appendToUrl(d,e));window.history.pushState({subpath:c.getPath()},window.document.title,d);b("Stratcom").removeCurrentListener()})}};e.exports=h}),null);
__d("MEventsTabBar",["cx","CSS","MEventsDashboardURISetter","Stratcom"],(function(a,b,c,d,e,f,g){var h=[],i=null,j=null,k=null,l={_toggleActive:function(a){i&&i.childNodes&&[].slice.call(i.childNodes).forEach(function(a){b("CSS").removeClass(a.firstChild,"_5kqs")});a=a.getTarget();a instanceof HTMLAnchorElement&&(b("CSS").addClass(a,"_5kqs"),l.replaceURI(a.href))},showSpinner:function(){k&&b("CSS").hide(k),j&&b("CSS").show(j)},hideSpinner:function(){k&&b("CSS").show(k),j&&b("CSS").hide(j)},replaceURI:function(a){l.showSpinner(),b("MEventsDashboardURISetter").replaceURI(a)},setup:function(a,c,d,e){l._cleanup(),h=e.map(function(a){return b("Stratcom").listen("click",a,l._toggleActive.bind(l))}),i=a,j=c,k=d,b("CSS").hide(j)},_cleanup:function(){while(h.length)h.pop().remove();i=null;j=null;k=null}};e.exports=l}),null);
__d("MEventPermalink",["FW"],(function(a,b,c,d,e,f,g){function a(){window.FW_ENABLED&&c("FW").setNavBarButton("","1;","toolbarButton")}b={clearHeaderButton:a};g["default"]=b}),98);
__d("MTimelineLandscapeCoverCrop",["DOM","MViewport","Stratcom","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=!1;function a(a){if(h)return;h=!0;function b(){var b=d("MViewport").isLandscape(),e=d("DOM").scry(document.body,"div","landscapeCoverCrop")[0],f=d("DOM").scry(document.body,"*","cover-photo")[0];if(!e||!f)return;if(b){b=d("MViewport").getUseableHeight();var g=Math.max(window.innerHeight,window.innerWidth);g=g/a.aspectRatio;b=Math.round(b-a.bottomPadding);g=Math.round((g-b)/2);e.style.height=b+"px";f.style.bottom=g+"px"}else e.style.height="",f.style.bottom="";c("Stratcom").invoke("m:landscape-cover-crop:complete")}c("Stratcom").listen("m:orientation-resize:complete",null,function(){c("setTimeoutAcrossTransitions")(b,0)});b()}g.main=a}),98);
__d("MReactionUnitViewportTracking",["DOM","MLegacyDataStore","MViewportTracking","MarauderLogger","Stratcom","ge"],(function(a,b,c,d,e,f,g){"use strict";var h="reaction-unit-logging",i=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.onUnload=function(){c.startRecordingTimeTrackingData()},a)||babelHelpers.assertThisInitialized(c)}var e=a.prototype;e.getDataFromConfig=function(a){var b=this;this.$MReactionUnitViewportTracking1=[c("Stratcom").listen("m:jewel:flyout:open",null,function(a){a.getData().jewel==="notifications"&&b.startRecordingTimeTrackingData()}),c("Stratcom").listen("m:jewel:flyout:close",null,function(a){a.getData().jewel==="notifications"&&b.stopRecordingTimeTrackingData()}),c("Stratcom").listen("unload",null,function(){b.stopRecordingTimeTrackingData()})];this.isTimeTrackingEnabled=!0};e.getAllStories=function(){var a=c("ge")("notifications_flyout");return!a?[]:d("DOM").scry(a,"div",h)};e.getTimeout=function(){return 1};e.getDataToLog=function(a){return d("MLegacyDataStore").get(a).logging_data};e.getMinSizeToBeVisible=function(a){return 0};e.getStoryID=function(a){return a.id};e.getTimetrackingDataToLog=function(a){var b={};Object.assign(b,d("MLegacyDataStore").get(a.story).logging_data);b.unit_type=b.interacted_story_type;delete b.interacted_story_type;b.first_appear_time=a.evp_ts/1e3;b.vpvd_time_delta=Math.round(a.vpvd);var c=this.getAllStories();b.unit_count=c.length;b.unit_position=c.indexOf(a.story);return b};e.sendDataToLog=function(a){if(!a.vpvd_time_delta)return;d("MarauderLogger").log("reaction_unit_impression","reaction_units",a)};return a}(c("MViewportTracking"));function a(a){new i().init(a)}g.init=a}),98);
__d("MReactionLogging",["MLegacyDataStore","MReactionUnitViewportTracking","MarauderLogger","Stratcom"],(function(a,b,c,d,e,f,g){var h="reaction_logging",i=[];function a(a){d("MReactionUnitViewportTracking").init(a);if(i.length)return;i=[c("Stratcom").listen("click",h,function(a){a=a.getNode(h);a instanceof HTMLElement&&j(a)}),c("Stratcom").listen("reaction-unit-expiration",null,function(a){d("MarauderLogger").log("reaction_unit_did_timeout","reaction_units",a.getData())})]}function j(a){a=d("MLegacyDataStore").get(a).logging_data;d("MarauderLogger").log("reaction_unit_interaction","guide_cards_null_state",a)}g.init=a}),98);
__d("MReactionUnitExpirations",["MLocationPrompt","MRequest","Stratcom","ThisControllerNoLongerExists","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h={},i=[],j=1e3*60*10;function a(){if(i.length)return;i=[c("Stratcom").listen(c("MLocationPrompt").STRATCOM_UPDATE,null,function(a){l(a.getData().position.coords)})];c("setTimeoutAcrossTransitions")(k,j)}function b(a,b,d){h[a]={unit_type:d,expiration:b},b.radius&&c("MLocationPrompt").getCoords()&&m(a,c("MLocationPrompt").getCoords())}function k(){var a=Date.now()/1e3;for(var b in h)a>h[b].expiration.timestamp&&n(b);c("setTimeoutAcrossTransitions")(k,j)}function l(a){if(!a||a.latitude===void 0||a.longitude===void 0)return;for(var b in h)m(b,a)}function m(a,b){var c=h[a].expiration;c.radius&&o(c.latitude,c.longitude,b.latitude,b.longitude)>c.radius&&n(a)}function n(a){var b=d("ThisControllerNoLongerExists").__DEADBUILDER__("re0pnqd6s").setString("id",a),e=c("MLocationPrompt").getCoords();e&&b.setFloat("lat",e.latitude).setFloat("long",e.longitude);c("Stratcom").invoke("reaction-unit-expiration",null,{unit_type:h[a].unit_type});new(c("MRequest"))(b.getURI().toString()).send();delete h[a]}function o(a,b,c,d){var e=6371e3,f=p(c-a);d=p(d-b);b=Math.sin(f/2)*Math.sin(f/2)+Math.cos(p(a))*Math.cos(p(c))*Math.sin(d/2)*Math.sin(d/2);f=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));a=e*f;return a}function p(a){return a*(Math.PI/180)}g.init=a;g.updateUnitExpiration=b}),98);